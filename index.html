<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üóìÔ∏è Lienzo: Plantilla de L√≠neas de Tiempo (UX)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @media print { .no-print { display:none!important; } }
  </style>
</head>
<body class="min-h-screen bg-slate-50 text-slate-900">
  <header class="bg-white/80 backdrop-blur sticky top-0 z-50 border-b border-slate-200">
    <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
      <h1 class="text-2xl md:text-3xl font-bold tracking-tight">üóìÔ∏è Plantilla de L√≠neas de Tiempo UX</h1>
      <div class="flex gap-2 no-print">
        <input id="fileJSON" type="file" accept="application/json,.json" class="hidden" />
        <button id="importJSON" class="px-3 py-2 rounded-xl bg-amber-600 text-white hover:bg-amber-700 text-sm font-semibold" title="Importa un archivo JSON con l√≠neas de tiempo previamente guardadas">Importar JSON</button>
        <button id="exportJSON" class="px-3 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 text-sm font-semibold" title="Exporta tus l√≠neas de tiempo como archivo JSON para compartir o respaldar">Exportar JSON</button>
        <button id="clearAll" class="px-3 py-2 rounded-xl bg-rose-600 text-white hover:bg-rose-700 text-sm font-semibold" title="Vac√≠a todo el backlog almacenado en el navegador">Vaciar</button>
        <button id="printBtn" class="px-3 py-2 rounded-xl bg-slate-800 text-white hover:bg-black text-sm font-semibold" title="Imprime o guarda en PDF tu l√≠nea de tiempo actual">Imprimir</button>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 py-6 grid lg:grid-cols-3 gap-6">
    <!-- Formulario -->
    <section class="lg:col-span-2">
      <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
        <div class="px-5 py-4 border-b border-slate-200">
          <h2 class="text-xl font-semibold">Crear L√≠nea de Tiempo</h2>
        </div>
        <form id="timelineForm" class="p-5 grid md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium mb-1" for="etapa" title="Desde UX: etapa o momento del recorrido del usuario (antes, durante, despu√©s)">Etapa ‚ÑπÔ∏è</label>
            <input id="etapa" name="etapa" type="text" required placeholder="Descubrimiento / Uso / Post-servicio" class="w-full rounded-xl border-slate-300 focus:ring-2 focus:ring-indigo-500" />
          </div>
          <div>
            <label class="block text-sm font-medium mb-1" for="actividad" title="Desde UX: acci√≥n observable realizada por la persona en esa etapa">Actividad ‚ÑπÔ∏è</label>
            <input id="actividad" name="actividad" type="text" required placeholder="Buscar informaci√≥n / Realizar compra" class="w-full rounded-xl border-slate-300 focus:ring-2 focus:ring-indigo-500" />
          </div>
          <div class="md:col-span-2">
            <label class="block text-sm font-medium mb-1" for="pensamientos" title="Desde UX: pensamientos, dudas o decisiones que experimenta la persona">Pensamientos ‚ÑπÔ∏è</label>
            <textarea id="pensamientos" name="pensamientos" rows="2" placeholder="¬øQu√© est√° pensando la persona?" class="w-full rounded-xl border-slate-300 focus:ring-2 focus:ring-indigo-500"></textarea>
          </div>
          <div class="md:col-span-2">
            <label class="block text-sm font-medium mb-1" for="emociones" title="Desde UX: emociones principales que influyen en la experiencia">Emociones ‚ÑπÔ∏è</label>
            <textarea id="emociones" name="emociones" rows="2" placeholder="Frustraci√≥n, entusiasmo, duda..." class="w-full rounded-xl border-slate-300 focus:ring-2 focus:ring-indigo-500"></textarea>
          </div>
          <div class="md:col-span-2 flex flex-wrap gap-3 pt-2 no-print">
            <button type="submit" class="px-4 py-2 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700" title="Agrega la etapa al backlog y al visualizador">Agregar etapa</button>
            <button type="reset" class="px-4 py-2 rounded-xl bg-slate-100 hover:bg-slate-200" title="Limpia los campos del formulario">Limpiar</button>
          </div>
        </form>
      </div>
    </section>

    <!-- Tips -->
    <aside class="space-y-6">
      <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-5">
        <h3 class="font-semibold text-lg mb-3">üìå Consejos para L√≠neas de Tiempo UX</h3>
        <ul class="text-sm list-disc list-inside space-y-1">
          <li>Representa en orden cronol√≥gico las acciones y emociones de la persona.</li>
          <li>Describe actividades con verbos claros que reflejen la acci√≥n del usuario.</li>
          <li>Incluye pensamientos y emociones reales para detectar fricciones y oportunidades.</li>
          <li>Recuerda: la l√≠nea de tiempo es m√°s simple que un viaje de usuario, conc√©ntrate en lo esencial.</li>
        </ul>
      </div>
      <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-5">
        <h3 class="font-semibold text-lg mb-3">üíæ Guardado</h3>
        <p class="text-sm">Las l√≠neas se almacenan en tu navegador (<code>localStorage</code>). Puedes importar o exportar JSON para compartirlas.</p>
      </div>
    </aside>

    <!-- Visualizador -->
    <section class="lg:col-span-3">
      <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-5">
        <h3 class="text-lg font-semibold">üëÄ Visualizador de L√≠nea de Tiempo</h3>
        <div id="visualizer" class="mt-4 overflow-x-auto text-sm text-slate-500">Sin elementos para visualizar.</div>
      </div>
    </section>

    <!-- Tabla -->
    <section class="lg:col-span-3">
      <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
        <div class="px-5 py-4 border-b border-slate-200 flex items-center justify-between">
          <h2 class="text-xl font-semibold">Backlog de L√≠neas de Tiempo</h2>
          <div class="text-xs text-slate-500">ID autogenerado (LT-001, LT-002...)</div>
        </div>
        <div class="overflow-x-auto">
          <table class="w-full text-sm" id="timelineTable">
            <thead class="bg-slate-100">
              <tr>
                <th class="px-3 py-2 text-left" title="Identificador √∫nico de la l√≠nea de tiempo">ID ‚ÑπÔ∏è</th>
                <th class="px-3 py-2 text-left" title="Etapa o momento del recorrido">Etapa ‚ÑπÔ∏è</th>
                <th class="px-3 py-2 text-left" title="Actividad observable del usuario">Actividad ‚ÑπÔ∏è</th>
                <th class="px-3 py-2 text-left" title="Pensamientos de la persona en esa etapa">Pensamientos ‚ÑπÔ∏è</th>
                <th class="px-3 py-2 text-left" title="Emociones de la persona en esa etapa">Emociones ‚ÑπÔ∏è</th>
                <th class="px-3 py-2 text-left no-print" title="Acci√≥n para eliminar la entrada si es necesario">Acciones ‚ÑπÔ∏è</th>
              </tr>
            </thead>
            <tbody id="tbody"></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <script>
    const form=document.getElementById('timelineForm');
    const tbody=document.getElementById('tbody');
    const KEY='userTimelines';
    const VIS=document.getElementById('visualizer');

    function loadLines(){tbody.innerHTML='';}
    function nextId(){const d=JSON.parse(localStorage.getItem(KEY)||'[]');return `LT-${String(d.length+1).padStart(3,'0')}`;}
    function addRow(l){const tr=document.createElement('tr');tr.className='border-b border-slate-200';tr.innerHTML=`<td class='px-3 py-2 font-semibold'>${l.id}</td><td class='px-3 py-2'>${l.etapa}</td><td class='px-3 py-2'>${l.actividad}</td><td class='px-3 py-2'>${l.pensamientos}</td><td class='px-3 py-2'>${l.emociones}</td><td class='px-3 py-2 no-print'><button class='text-rose-700 text-xs' data-id='${l.id}'>Eliminar</button></td>`;tbody.appendChild(tr);} 
    function save(l){const d=JSON.parse(localStorage.getItem(KEY)||'[]');d.push(l);localStorage.setItem(KEY,JSON.stringify(d));}
    function removeById(id){const d=JSON.parse(localStorage.getItem(KEY)||'[]').filter(x=>x.id!==id);localStorage.setItem(KEY,JSON.stringify(d));loadFromStorage();}
    function loadFromStorage(){const d=JSON.parse(localStorage.getItem(KEY)||'[]');tbody.innerHTML='';d.forEach(addRow);} 

    function renderVisual(){const d=JSON.parse(localStorage.getItem(KEY)||'[]');if(!d.length){VIS.innerHTML='<div class="text-sm text-slate-500">Sin elementos para visualizar.</div>';return;}VIS.innerHTML=`<div class='min-w-max flex gap-4'>${d.map(l=>`<div class='w-64 bg-white border border-slate-200 rounded-xl p-4 shadow-sm'><h4 class='font-semibold'>${l.etapa}</h4><div class='text-sm'><span class='font-medium'>Actividad:</span> ${l.actividad}</div>${l.pensamientos?`<div class='text-xs mt-1'><span class='font-medium'>Pensamientos:</span> ${l.pensamientos}</div>`:''}${l.emociones?`<div class='text-xs mt-1'><span class='font-medium'>Emociones:</span> ${l.emociones}</div>`:''}</div>`).join('')}</div>`;}

    form.addEventListener('submit',e=>{e.preventDefault();const l={id:nextId(),etapa:form.etapa.value.trim(),actividad:form.actividad.value.trim(),pensamientos:form.pensamientos.value.trim(),emociones:form.emociones.value.trim()};if(!l.etapa||!l.actividad){alert('Completa etapa y actividad');return;}save(l);addRow(l);renderVisual();form.reset();});
    tbody.addEventListener('click',e=>{const id=e.target.getAttribute('data-id');if(id&&confirm('¬øEliminar '+id+'?')){removeById(id);renderVisual();}});

    document.getElementById('exportJSON').addEventListener('click',()=>{const d=JSON.parse(localStorage.getItem(KEY)||'[]');if(!d.length)return alert('Nada que exportar');const blob=new Blob([JSON.stringify(d,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='lineas_tiempo.json';a.click();setTimeout(()=>URL.revokeObjectURL(url),500);});
    document.getElementById('clearAll').addEventListener('click',()=>{if(confirm('¬øVaciar todas las l√≠neas?')){localStorage.removeItem(KEY);loadLines();renderVisual();}});
    document.getElementById('importJSON').addEventListener('click',()=>document.getElementById('fileJSON').click());
    document.getElementById('fileJSON').addEventListener('change',async e=>{const f=e.target.files?.[0];if(!f)return;try{const arr=JSON.parse(await f.text());if(!Array.isArray(arr))return alert('El JSON debe ser un arreglo');arr.forEach(x=>{save(x);addRow(x);});renderVisual();}catch(err){alert('Error: '+err.message);}finally{e.target.value='';}});
    document.getElementById('printBtn').addEventListener('click',()=>window.print());

    loadLines();
    renderVisual();
  </script>
</body>
</html>
